{"remainingRequest":"/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/node_modules/babel-loader/lib/index.js!/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/src/components/Dialog.js","dependencies":[{"path":"/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/src/components/Dialog.js","mtime":1595163695038},{"path":"/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1584708646078},{"path":"/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/node_modules/babel-loader/lib/index.js","mtime":1585053728484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMveHVlZGl4dWVkaS9seGRUaGluZ3MvQ29kZS9naXRodWIvbWVzaC1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBNb2RhbCBmcm9tICdhbnQtZGVzaWduLXZ1ZS9lcy9tb2RhbCc7CmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoVnVlKSB7CiAgZnVuY3Rpb24gZGlhbG9nKGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG1vZGFsUHJvcHMpIHsKICAgIHZhciBfdm0gPSB0aGlzOwoKICAgIG1vZGFsUHJvcHMgPSBtb2RhbFByb3BzIHx8IHt9OwoKICAgIGlmICghX3ZtIHx8ICFfdm0uX2lzVnVlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZGlhbG9nRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keT5kaXZbdHlwZT1kaWFsb2ddJyk7CgogICAgaWYgKCFkaWFsb2dEaXYpIHsKICAgICAgZGlhbG9nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGRpYWxvZ0Rpdi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGlhbG9nJyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlhbG9nRGl2KTsKICAgIH0KCiAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKGNoZWNrRnVuY3Rpb24sIGFmdGVySGFuZGVsKSB7CiAgICAgIGlmIChjaGVja0Z1bmN0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICB2YXIgcmVzID0gY2hlY2tGdW5jdGlvbigpOwoKICAgICAgICBpZiAocmVzIGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgICAgcmVzLnRoZW4oZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgYyAmJiBhZnRlckhhbmRlbCgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcyAmJiBhZnRlckhhbmRlbCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjaGVja0Z1bmN0aW9uICYmIGFmdGVySGFuZGVsKCkKICAgICAgICBjaGVja0Z1bmN0aW9uIHx8IGFmdGVySGFuZGVsKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIGRpYWxvZ0luc3RhbmNlID0gbmV3IFZ1ZSh7CiAgICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZpc2libGU6IHRydWUKICAgICAgICB9OwogICAgICB9LAogICAgICByb3V0ZXI6IF92bS4kcm91dGVyLAogICAgICBzdG9yZTogX3ZtLiRzdG9yZSwKICAgICAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLiRvbignY2xvc2UnLCBmdW5jdGlvbiAodikgewogICAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZSgpIHsKICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgIGhhbmRsZSh0aGlzLiRyZWZzLl9jb21wb25lbnQub25DYW5jZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLnZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzMi4kcmVmcy5fY29tcG9uZW50LiRlbWl0KCdjbG9zZScpOwoKICAgICAgICAgICAgX3RoaXMyLiRyZWZzLl9jb21wb25lbnQuJGVtaXQoJ2NhbmNlbCcpOwoKICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlT2s6IGZ1bmN0aW9uIGhhbmRsZU9rKCkgewogICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgICAgaGFuZGxlKHRoaXMuJHJlZnMuX2NvbXBvbmVudC5vbk9LIHx8IHRoaXMuJHJlZnMuX2NvbXBvbmVudC5vbk9rLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy52aXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczMuJHJlZnMuX2NvbXBvbmVudC4kZW1pdCgnY2xvc2UnKTsKCiAgICAgICAgICAgIF90aGlzMy4kcmVmcy5fY29tcG9uZW50LiRlbWl0KCdvaycpOwoKICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UuJGRlc3Ryb3koKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICB2YXIgbW9kYWxNb2RlbCA9IG1vZGFsUHJvcHMgJiYgbW9kYWxQcm9wcy5tb2RlbDsKCiAgICAgICAgaWYgKG1vZGFsTW9kZWwpIHsKICAgICAgICAgIGRlbGV0ZSBtb2RhbFByb3BzLm1vZGVsOwogICAgICAgIH0KCiAgICAgICAgdmFyIE1vZGFsUHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBtb2RhbE1vZGVsICYmIHsKICAgICAgICAgIG1vZGVsOiBtb2RhbE1vZGVsCiAgICAgICAgfSB8fCB7fSwgewogICAgICAgICAgYXR0cnM6IE9iamVjdC5hc3NpZ24oe30sIF9vYmplY3RTcHJlYWQoe30sIG1vZGFsUHJvcHMuYXR0cnMgfHwgbW9kYWxQcm9wcyksIHsKICAgICAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiBPYmplY3QuYXNzaWduKHt9LCBfb2JqZWN0U3ByZWFkKHt9LCBtb2RhbFByb3BzLm9uIHx8IG1vZGFsUHJvcHMpLCB7CiAgICAgICAgICAgIG9rOiBmdW5jdGlvbiBvaygpIHsKICAgICAgICAgICAgICB0aGF0LmhhbmRsZU9rKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICAgICAgICAgIHRoYXQuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgY29tcG9uZW50TW9kZWwgPSBjb21wb25lbnRQcm9wcyAmJiBjb21wb25lbnRQcm9wcy5tb2RlbDsKCiAgICAgICAgaWYgKGNvbXBvbmVudE1vZGVsKSB7CiAgICAgICAgICBkZWxldGUgY29tcG9uZW50UHJvcHMubW9kZWw7CiAgICAgICAgfQoKICAgICAgICB2YXIgQ29tcG9uZW50UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBjb21wb25lbnRNb2RlbCAmJiB7CiAgICAgICAgICBtb2RlbDogY29tcG9uZW50TW9kZWwKICAgICAgICB9IHx8IHt9LCB7CiAgICAgICAgICByZWY6ICdfY29tcG9uZW50JywKICAgICAgICAgIGF0dHJzOiBPYmplY3QuYXNzaWduKHt9LCBfb2JqZWN0U3ByZWFkKHt9LCBjb21wb25lbnRQcm9wcyAmJiBjb21wb25lbnRQcm9wcy5hdHRycyB8fCBjb21wb25lbnRQcm9wcykpLAogICAgICAgICAgb246IE9iamVjdC5hc3NpZ24oe30sIF9vYmplY3RTcHJlYWQoe30sIGNvbXBvbmVudFByb3BzICYmIGNvbXBvbmVudFByb3BzLm9uIHx8IGNvbXBvbmVudFByb3BzKSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gaChNb2RhbCwgTW9kYWxQcm9wcywgW2goY29tcG9uZW50LCBDb21wb25lbnRQcm9wcyldKTsKICAgICAgfQogICAgfSkuJG1vdW50KGRpYWxvZ0Rpdik7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkaWFsb2cnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICBkaWFsb2cuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0KICB9KTsKfSk7"},{"version":3,"sources":["/Users/xuedixuedi/lxdThings/Code/github/mesh-frontend/src/components/Dialog.js"],"names":["Modal","Vue","dialog","component","componentProps","modalProps","_vm","_isVue","dialogDiv","document","querySelector","createElement","setAttribute","body","appendChild","handle","checkFunction","afterHandel","Function","res","Promise","then","c","dialogInstance","data","visible","router","$router","store","$store","mounted","$on","v","handleClose","methods","$refs","_component","onCancel","$emit","$destroy","handleOk","onOK","onOk","render","h","that","modalModel","model","ModalProps","Object","assign","attrs","on","ok","cancel","componentModel","ComponentProps","ref","$mount","defineProperty","prototype","get","apply","arguments"],"mappings":"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","sourcesContent":["import Modal from 'ant-design-vue/es/modal'\nexport default (Vue) => {\n  function dialog (component, componentProps, modalProps) {\n    const _vm = this\n    modalProps = modalProps || {}\n    if (!_vm || !_vm._isVue) {\n      return\n    }\n    let dialogDiv = document.querySelector('body>div[type=dialog]')\n    if (!dialogDiv) {\n      dialogDiv = document.createElement('div')\n      dialogDiv.setAttribute('type', 'dialog')\n      document.body.appendChild(dialogDiv)\n    }\n\n    const handle = function (checkFunction, afterHandel) {\n      if (checkFunction instanceof Function) {\n        const res = checkFunction()\n        if (res instanceof Promise) {\n          res.then(c => {\n            c && afterHandel()\n          })\n        } else {\n          res && afterHandel()\n        }\n      } else {\n        // checkFunction && afterHandel()\n        checkFunction || afterHandel()\n      }\n    }\n\n    const dialogInstance = new Vue({\n      data () {\n        return {\n          visible: true\n        }\n      },\n      router: _vm.$router,\n      store: _vm.$store,\n      mounted () {\n        this.$on('close', (v) => {\n          this.handleClose()\n        })\n      },\n      methods: {\n        handleClose () {\n          handle(this.$refs._component.onCancel, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('cancel')\n            dialogInstance.$destroy()\n          })\n        },\n        handleOk () {\n          handle(this.$refs._component.onOK || this.$refs._component.onOk, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('ok')\n            dialogInstance.$destroy()\n          })\n        }\n      },\n      render: function (h) {\n        const that = this\n        const modalModel = modalProps && modalProps.model\n        if (modalModel) {\n          delete modalProps.model\n        }\n        const ModalProps = Object.assign({}, modalModel && { model: modalModel } || {}, {\n          attrs: Object.assign({}, {\n            ...(modalProps.attrs || modalProps)\n          }, {\n            visible: this.visible\n          }),\n          on: Object.assign({}, {\n            ...(modalProps.on || modalProps)\n          }, {\n            ok: () => {\n              that.handleOk()\n            },\n            cancel: () => {\n              that.handleClose()\n            }\n          })\n        })\n\n        const componentModel = componentProps && componentProps.model\n        if (componentModel) {\n          delete componentProps.model\n        }\n        const ComponentProps = Object.assign({}, componentModel && { model: componentModel } || {}, {\n          ref: '_component',\n          attrs: Object.assign({}, {\n            ...((componentProps && componentProps.attrs) || componentProps)\n          }),\n          on: Object.assign({}, {\n            ...((componentProps && componentProps.on) || componentProps)\n          })\n        })\n\n        return h(Modal, ModalProps, [h(component, ComponentProps)])\n      }\n    }).$mount(dialogDiv)\n  }\n\n  Object.defineProperty(Vue.prototype, '$dialog', {\n    get: () => {\n      return function () {\n        dialog.apply(this, arguments)\n      }\n    }\n  })\n}\n"]}]}